{% extends 'base.html' %}

{% block content %}
  <div class="tna-section">
    <div class="tna-container">
      <div
        class="tna-column tna-column--width-2-3 tna-column--width-5-6-medium tna-column--full-small tna-column--full-tiny">

        {% if form.errors %}
          {{ tnaErrorSummary(wtforms_errors(form)) }}
        {% endif %}

        <h1 class="tna-heading-xl">{{ pageTitle }}</h1>

        <p>Thank you</p>

        <dl class="tna-dl">
          {% for page in session %}
          <dt>{{ page }}</dt>
          <dd>
            {{ session[page] }}
          </dd>
          {% endfor %}
          <dt>has_complete_path</dt>
          <dd>{{ has_complete_path }}</dd>
          <dt>earliest_incomplete_page</dt>
          <dd>{{ earliest_incomplete_page }}</dd>
          <dt>completion_handled</dt>
          <dd>{{ session.completion_handled }}</dd>
        </dl>
        
        <h2 class="tna-heading-l">All pages</h2>
        <ul class="tna-ul">
          {% for page in pages %}
          <li>
            <a href="{{ url_for('forms.page', form_slug=flow.slug, page_slug=page.slug) }}">{{ page.name }}</a>
            {% if page.is_complete(temporary_validation=True) %}
              (Complete)
            {% else %}
              (Incomplete)
            {% endif %}
          </li>
          {% endfor %}
        </ul>

        <p>
          <a href="{{ form_reset_path }}">Start again</a>
        </p>
      </div>
    </div>
  </div>
{% endblock %}
